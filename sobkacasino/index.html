<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>СОБКА КАЗИНО</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* ИЗМЕНЕНО: Все стили были переработаны */
        :root {
            --primary-bg: #1a222c;
            --secondary-bg: #2c3e50;
            --gold-color: #f1c40f;
            --red-color: #e74c3c;
            --green-color: #2ecc71;
            --text-color: #ecf0f1;
            --border-radius: 15px;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Poppins', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #0f1218, #2c3e50);
            color: var(--text-color);
        }

        .casino {
            text-align: center;
            background-color: var(--primary-bg);
            padding: 30px 40px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 90%;
            max-width: 500px;
        }

        h1 {
            margin-bottom: 25px;
            color: var(--gold-color);
            font-weight: 700;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.5);
        }

        .slots {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            gap: 15px;
        }

        .slot {
            width: 100px;
            height: 100px;
            border: 4px solid var(--gold-color);
            border-radius: 10px;
            overflow: hidden;
            background-color: #111;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.7);
            transition: box-shadow 0.3s;
        }
        
        /* НОВОЕ: Анимация свечения для слотов во время вращения */
        .slots.spinning .slot {
            box-shadow: inset 0 0 10px rgba(0,0,0,0.7), 0 0 20px var(--gold-color);
        }

        .slot img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .info-panel {
            background-color: var(--secondary-bg);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .balance-info {
            font-size: 20px;
            font-weight: 600;
        }

        #balance {
            color: var(--gold-color);
        }

        #message {
            margin-top: 10px;
            font-size: 18px;
            min-height: 27px;
            font-weight: 600;
            transition: color 0.3s;
        }
        
        /* НОВОЕ: Классы для сообщений */
        .win-message { color: var(--green-color); }
        .error-message { color: var(--red-color); }
        .info-message { color: var(--text-color); }


        .controls {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }

        .bet-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            width: 100%;
        }

        /* НОВОЕ: Стили для кнопок +/- */
        .bet-adjust-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 2px solid var(--gold-color);
            background-color: transparent;
            color: var(--gold-color);
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }
        .bet-adjust-btn:hover {
            background-color: var(--gold-color);
            color: var(--primary-bg);
        }
        .bet-adjust-btn:active {
            transform: scale(0.9);
        }

        #betInput {
            width: 120px;
            padding: 10px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 8px;
            border: 2px solid var(--secondary-bg);
            background-color: var(--primary-bg);
            color: var(--text-color);
            text-align: center;
            -moz-appearance: textfield; /* Убрать стрелки в Firefox */
        }
        #betInput::-webkit-outer-spin-button,
        #betInput::-webkit-inner-spin-button {
            -webkit-appearance: none; /* Убрать стрелки в Chrome, Safari, Edge, Opera */
        }


        #spinButton {
            width: 100%;
            padding: 15px 30px;
            font-size: 20px;
            cursor: pointer;
            border: none;
            border-radius: 10px;
            background: linear-gradient(145deg, var(--red-color), #c0392b);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        #spinButton:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(231, 76, 60, 0.5);
        }

        #spinButton:active:not(:disabled) {
            transform: translateY(1px);
        }

        #spinButton:disabled {
            background: #576574;
            cursor: not-allowed;
            box-shadow: none;
        }
        
        #topUpButton {
            margin-top: 10px;
            background: none;
            border: 2px solid var(--green-color);
            color: var(--green-color);
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        #topUpButton:hover:not(:disabled) {
            background-color: var(--green-color);
            color: var(--primary-bg);
        }
        #topUpButton:disabled {
            border-color: #576574;
            color: #576574;
            cursor: not-allowed;
        }

        /* НОВЫЙ БЛОК: Стили для промокодов */
        .promo-container {
            display: flex;
            width: 100%;
            gap: 10px;
            margin-top: -10px; /* Уменьшим отступ, так как у topUpButton уже есть margin */
        }

        #promoInput {
            flex-grow: 1;
            padding: 10px;
            font-size: 16px;
            border-radius: 8px;
            border: 2px solid var(--secondary-bg);
            background-color: var(--primary-bg);
            color: var(--text-color);
            font-family: 'Poppins', sans-serif;
        }
        #promoInput::placeholder {
            color: #7f8c8d;
        }

        #promoButton {
            padding: 10px 15px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 8px;
            background: linear-gradient(145deg, var(--gold-color), #d4ac0d);
            color: var(--primary-bg);
            font-weight: bold;
            transition: all 0.3s;
            font-family: 'Poppins', sans-serif;
        }
        #promoButton:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(241, 196, 15, 0.4);
        }
        /* КОНЕЦ НОВОГО БЛОКА */
    </style>
</head>
<body>

<div class="casino">
    <h1>СОБКА КАЗИНО</h1>
    <div class="slots" id="slots-container">
        <div class="slot" id="slot1"><img src="https://sobka228.github.io/sobkacasino/images/jopka.jpg" alt="?"></div>
        <div class="slot" id="slot2"><img src="https://sobka228.github.io/sobkacasino/images/jopka.jpg" alt="?"></div>
        <div class="slot" id="slot3"><img src="https://sobka228.github.io/sobkacasino/images/jopka.jpg" alt="?"></div>
    </div>

    <div class="info-panel">
        <div class="balance-info">
            Баланс: <span id="balance">500</span> копеек
        </div>
        <div id="message" class="info-message">Удачи лох!</div>
    </div>
    
    <div class="controls">
        <div class="bet-container">
            <button class="bet-adjust-btn" id="decreaseBet">-</button>
            <input type="number" id="betInput" value="50" min="10" step="10">
            <button class="bet-adjust-btn" id="increaseBet">+</button>
        </div>
        <button id="spinButton">Крутить</button>
        <button id="topUpButton">Пополнить (+100 копеек)</button>
        
        <div class="promo-container">
            <input type="text" id="promoInput" placeholder="Введите промокод">
            <button id="promoButton">Применить</button>
        </div>
        </div>
</div>

<audio id="spinSound" src="https://sobka228.github.io/sobkacasino/sounds/ak47-1.mp3"></audio>
<audio id="winSound" src="https://sobka228.github.io/sobkacasino/sounds/fgoooooo.mp3"></audio>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const symbols = [
            { name: 'stanok', img: 'https://sobka228.github.io/sobkacasino/images/pila.jpg', weight: 3 },
            { name: 'pokakat', img: 'https://sobka228.github.io/sobkacasino/images/pokakat.jpg', weight: 5 },
            { name: 'sopina', img: 'https://sobka228.github.io/sobkacasino/images/sopina.jpg', weight: 8 },
            { name: 'gomyak', img: 'https://sobka228.github.io/sobkacasino/images/gomyak.jpg', weight: 10 },
            { name: 'kiwi', img: 'https://sobka228.github.io/sobkacasino/images/kiwi.jpg', weight: 12 },
            { name: 'grysha', img: 'https://sobka228.github.io/sobkacasino/images/grysha.jpg', weight: 15 },
            { name: 'imba', img: 'https://sobka228.github.io/sobkacasino/images/imba.jpg', weight: 7 },
            { name: 'shalava', img: 'https://sobka228.github.io/sobkacasino/images/shalava.jpg', weight: 13 }
        ];

        const winCombinations = {
            'stanok-stanok-stanok': 4,
            'pokakat-pokakat-pokakat': 10,
            'sopina-sopina-sopina': 20,
            'gomyak-gomyak-gomyak': 40,
            'kiwi-kiwi-kiwi': 100,
            'grysha-grysha-grysha': 200,
            'shalava-shalava-shalava': 220
        };
        
        /* НОВЫЙ БЛОК: Список промокодов */
        const promoCodes = {
            'SOBKAWIN': { amount: 500, used: false },
            'LOX_PETUH': { amount: 1000, used: false },
            'SECRET': { amount: 9000000000000, used: false }
        };
        /* КОНЕЦ НОВОГО БЛОКА */


        const spinButton = document.getElementById('spinButton');
        const message = document.getElementById('message');
        const balanceDisplay = document.getElementById('balance');
        const spinSound = document.getElementById('spinSound');
        const winSound = document.getElementById('winSound');
        const topUpButton = document.getElementById('topUpButton');
        const betInput = document.getElementById('betInput');
        const slotsContainer = document.getElementById('slots-container');
        const decreaseBetBtn = document.getElementById('decreaseBet');
        const increaseBetBtn = document.getElementById('increaseBet');
        
        /* НОВЫЙ БЛОК: Получение элементов промокода */
        const promoInput = document.getElementById('promoInput');
        const promoButton = document.getElementById('promoButton');
        /* КОНЕЦ НОВОГО БЛОКА */

        let topUpCount = 0;
        const maxTopUps = 3;
        let balance = 500;

        const weightedSymbols = [];
        symbols.forEach(symbol => {
            for (let i = 0; i < symbol.weight; i++) {
                weightedSymbols.push(symbol);
            }
        });

        function getRandomSymbol() {
            const randomIndex = Math.floor(Math.random() * weightedSymbols.length);
            return weightedSymbols[randomIndex];
        }
        
        function showMessage(text, type) {
            message.textContent = text;
            message.className = type + '-message';
        }

        function spin() {
            const currentBet = parseInt(betInput.value, 10);
            const minBet = parseInt(betInput.min, 10);

            if (isNaN(currentBet) || currentBet < minBet) {
                showMessage(`Ле блядь ставка не может быть меньше ${minBet}`, 'error');
                return;
            }

            if (balance < currentBet) {
                showMessage('Недостаточно средств!', 'error');
                spinButton.disabled = true;
                return;
            }

            spinSound.currentTime = 0;
            spinSound.play();

            balance -= currentBet;
            updateBalance();

            spinButton.disabled = true;
            betInput.disabled = true;
            decreaseBetBtn.disabled = true;
            increaseBetBtn.disabled = true;
            slotsContainer.classList.add('spinning');
            showMessage('Крутим...', 'info');

            const slots = [document.getElementById('slot1'), document.getElementById('slot2'), document.getElementById('slot3')];
            let results = [];
            let spinCount = 0;

            slots.forEach((slot, index) => {
                const interval = setInterval(() => {
                    const randomSymbol = getRandomSymbol();
                    slot.innerHTML = `<img src="${randomSymbol.img}" alt="${randomSymbol.name}">`;
                }, 100);

                setTimeout(() => {
                    clearInterval(interval);
                    const finalSymbol = getRandomSymbol();
                    slot.innerHTML = `<img src="${finalSymbol.img}" alt="${finalSymbol.name}">`;
                    results[index] = finalSymbol.name;
                    spinCount++;

                    if (spinCount === slots.length) {
                        checkWin(results, currentBet);
                    }
                }, 1000 + index * 500);
            });
        }

        function checkWin(results, currentBet) {
            slotsContainer.classList.remove('spinning');
            const resultString = results.join('-');
            const winMultiplier = winCombinations[resultString];

            if (winMultiplier) {
                const winAmount = currentBet * winMultiplier;
                winSound.currentTime = 0;
                winSound.play();
                showMessage(`ДЖЕКПОТ! +${winAmount} копеек`, 'win');
                balance += winAmount;
            } else if (results[0] === results[1] || results[1] === results[2]) {
                showMessage(`Комбинация! Ставка возвращена (+${currentBet} копеек)`, 'win');
                balance += currentBet;
            } else {
                showMessage('Попробуйте еще раз!', 'info');
            }
            updateBalance();
            updateControlsState();
        }

        function updateBalance() {
            balanceDisplay.textContent = balance;
        }
        
        function updateControlsState() {
            const currentBet = parseInt(betInput.value, 10);
            spinButton.disabled = balance < currentBet || isNaN(currentBet);
            betInput.disabled = false;
            decreaseBetBtn.disabled = false;
            increaseBetBtn.disabled = false;
            
            if (balance < currentBet && balance > 0) {
                showMessage('Ле брад снизь ставку или копейку дэй нам', 'error');
            } else if (balance <= 0) {
                showMessage('ВЫ БОМЖ.', 'error');
            }
        }

        spinButton.addEventListener('click', spin);

        topUpButton.addEventListener('click', () => {
            if (topUpCount < maxTopUps) {
                balance += 100;
                topUpCount++;
                updateBalance();
                showMessage('Баланс пополнен!', 'win');
                updateControlsState();

                if (topUpCount >= maxTopUps) {
                    topUpButton.disabled = true;
                    topUpButton.textContent = "У ВАС ПОСЛЕДНИЕ ДЕНЬГИ ЗАКОНЧИЛИСЬ(((";
                }
            }
        });
        
        increaseBetBtn.addEventListener('click', () => {
            const step = parseInt(betInput.step, 10);
            betInput.value = parseInt(betInput.value, 10) + step;
            updateControlsState();
        });

        decreaseBetBtn.addEventListener('click', () => {
            const step = parseInt(betInput.step, 10);
            const min = parseInt(betInput.min, 10);
            let newValue = parseInt(betInput.value, 10) - step;
            if (newValue < min) {
                newValue = min;
            }
            betInput.value = newValue;
            updateControlsState();
        });
        
        betInput.addEventListener('input', updateControlsState);
        
        /* НОВЫЙ БЛОК: Логика для промокодов */
        promoButton.addEventListener('click', () => {
            const code = promoInput.value.toUpperCase().trim(); // Приводим к верхнему регистру и убираем пробелы

            if (!code) {
                showMessage('Сначала введите промокод!', 'error');
                return;
            }

            const promo = promoCodes[code];

            if (promo && !promo.used) {
                balance += promo.amount;
                promo.used = true; // Помечаем промокод как использованный
                updateBalance();
                showMessage(`Промокод "${code}" активирован! +${promo.amount} копеек`, 'win');
                updateControlsState();
            } else if (promo && promo.used) {
                showMessage('Этот промокод уже был использован!', 'error');
            } else {
                showMessage('ты че выдумавать такого промо нету блядь ле', 'error');
            }

            promoInput.value = ''; // Очищаем поле ввода
        });
        /* КОНЕЦ НОВОГО БЛОКА */
    });
</script>

</body>
</html>